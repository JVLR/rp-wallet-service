Perfeito! Agora que temos o desafio tÃ©cnico do Nubank (Ganho de Capital) completo, posso te ajudar a criar um prompt altamente eficaz para o Cursor AI (ou outro copiloto de IA), que gere a base do projeto em Java seguindo as exigÃªncias descritas no documento.


---

âœ… Prompt completo e ideal para o Cursor AI

Crie uma aplicaÃ§Ã£o de linha de comando (CLI) em Java 21 que resolva o desafio de "Ganho de Capital" proposto no processo seletivo do Nubank.

### ğŸ§  Objetivo:
Implementar um programa que receba listas de operaÃ§Ãµes financeiras (buy/sell) via entrada padrÃ£o (stdin) e retorne, via saÃ­da padrÃ£o (stdout), os impostos devidos com base nas regras de ganho de capital.

### ğŸ¯ Regras principais:
- A entrada Ã© uma ou mais linhas, cada uma contendo uma lista JSON com operaÃ§Ãµes financeiras (compras ou vendas de aÃ§Ãµes).
- Cada operaÃ§Ã£o contÃ©m: `operation` (buy ou sell), `unit-cost` (preÃ§o unitÃ¡rio), `quantity` (quantidade).
- A saÃ­da deve ser uma lista JSON do mesmo tamanho, com objetos contendo apenas o campo `tax`.
- Imposto = 20% sobre o lucro apurado em vendas, considerando:
  - PreÃ§o mÃ©dio ponderado das compras
  - PrejuÃ­zos acumulados de vendas anteriores
  - IsenÃ§Ã£o se o total da venda for â‰¤ R$ 20.000, mesmo que haja lucro
- Nenhum imposto Ã© cobrado em operaÃ§Ãµes de compra
- PrejuÃ­zos podem ser acumulados e usados para compensar lucros futuros

### ğŸ”§ Requisitos tÃ©cnicos:
- Java 21
- Leitura da entrada via `System.in` (stdin)
- Escrita da saÃ­da via `System.out` (stdout)
- CÃ¡lculo do preÃ§o mÃ©dio ponderado apÃ³s cada compra
- Armazenamento em memÃ³ria do estado da simulaÃ§Ã£o por linha
- ReinÃ­cio do estado para cada nova linha da entrada
- Arredondar impostos para duas casas decimais
- Usar apenas bibliotecas padrÃ£o do Java (ex: `java.util`, `java.math.BigDecimal`, `com.fasterxml.jackson` se necessÃ¡rio)

### âœ… Testes:
- Criar testes unitÃ¡rios com JUnit 5 para os principais casos do desafio (exemplos: lucro, prejuÃ­zo, isenÃ§Ã£o, compensaÃ§Ã£o de perdas)
- Pode incluir testes de integraÃ§Ã£o simulando entrada/saÃ­da via stream

### ğŸ“ Estrutura esperada:
- `Main.java` (classe principal com leitura e processamento)
- `Operation.java` (classe que representa a operaÃ§Ã£o)
- `CapitalGainCalculator.java` (regra de negÃ³cio)
- `TaxResult.java` (representa a saÃ­da)
- `tests/` (com testes automatizados)
- `README.md` com instruÃ§Ãµes de compilaÃ§Ã£o, execuÃ§Ã£o e testes
- `Dockerfile` e/ou `Makefile` opcionais, se quiser

### ğŸš« O que evitar:
- NÃ£o usar frameworks como Spring ou Micronaut
- NÃ£o usar bibliotecas de terceiros alÃ©m do necessÃ¡rio para JSON
- NÃ£o criar endpoints REST ou GUI
- Evitar overengineering

Gere a estrutura do projeto e comece pela classe que calcula o imposto (`CapitalGainCalculator`). Depois, me ajude a implementar a leitura da entrada e os testes.


---

ğŸ§ª Dicas para etapas seguintes:

Depois que o Cursor gerar a estrutura base, vocÃª pode continuar com prompts como:

"Implemente a lÃ³gica de cÃ¡lculo da mÃ©dia ponderada e deduÃ§Ã£o de prejuÃ­zo"

"Crie testes para o caso #3 do desafio"

"Implemente a leitura da entrada JSON usando Jackson"

"Gere o README com instruÃ§Ãµes de execuÃ§Ã£o com java e testes com JUnit 5"



---

Se quiser, posso:

Gerar diretamente essa estrutura base em Java para vocÃª agora mesmo

Te ajudar a escrever os testes com base nos casos do PDF

Validar sua soluÃ§Ã£o, se jÃ¡ tiver comeÃ§ado


Deseja seguir por algum desses caminhos?

